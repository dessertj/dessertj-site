<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.12">
<title>Dessert Dependency Assertion Library for Java</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:50%;border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Dessert Dependency Assertion Library for Java</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#getting_started">1. Getting Started</a>
<ul class="sectlevel2">
<li><a href="#maven-dependency">1.1. Maven Dependency</a></li>
<li><a href="#snapshot-dependency-optional-alternative">1.2. Snapshot Dependency (optional alternative)</a></li>
<li><a href="#first-test">1.3. First Test</a></li>
</ul>
</li>
<li><a href="#tutorial">2. Tutorial</a>
<ul class="sectlevel2">
<li><a href="#detect-usage-of-internal-apis">2.1. Detect usage of internal APIs</a></li>
<li><a href="#detect-duplicates">2.2. Detect duplicates</a></li>
<li><a href="#detect-cycles">2.3. Detect cycles</a></li>
<li><a href="#investigate-your-project">2.4. Investigate your project</a></li>
<li><a href="#simulate-refactorings">2.5. Simulate refactorings</a></li>
<li><a href="#check-your-layers">2.6. Check your layers</a></li>
<li><a href="#modularize-your-project">2.7. Modularize your project</a></li>
<li><a href="#define-your-custom-classpath">2.8. Define your custom classpath</a></li>
</ul>
</li>
<li><a href="#user-documentation">3. User Documentation</a>
<ul class="sectlevel2">
<li><a href="#background">3.1. Background</a></li>
<li><a href="#design-goals-and-features">3.2. Design Goals and Features</a></li>
<li><a href="#the-slice">3.3. The Slice</a></li>
<li><a href="#name-patterns">3.4. Name-Patterns</a></li>
<li><a href="#predicates">3.5. Predicates</a></li>
<li><a href="#duplicates">3.6. Duplicates</a></li>
<li><a href="#assertions">3.7. Assertions</a></li>
<li><a href="#cycle-detection">3.8. Cycle detection</a></li>
<li><a href="#architecture-verification">3.9. Architecture verification</a></li>
<li><a href="#customize-class-resolving">3.10. Customize class resolving</a></li>
</ul>
</li>
<li><a href="#plans-for-dessert-core-0-5-x">4. Plans for dessert-core 0.5.x</a></li>
<li><a href="#getting-involved">5. Getting Involved</a></li>
<li><a href="#frequently-asked-questsions">6. Frequently asked Questsions</a>
<ul class="sectlevel2">
<li><a href="#when-will-be-there-a-1-0-version">6.1. When will be there a 1.0 version?</a></li>
<li><a href="#why-does-dessert-find-more-dependencies-than-jdeps">6.2. Why does dessert find more dependencies than <em>jdeps</em>?</a></li>
</ul>
</li>
<li><a href="#release-notes">7. Release Notes</a>
<ul class="sectlevel2">
<li><a href="#dessert-core-0-4-2">7.1. dessert-core-0.4.2</a></li>
<li><a href="#dessert-core-0-4-1">7.2. dessert-core-0.4.1</a></li>
<li><a href="#dessert-core-0-4-0">7.3. dessert-core-0.4.0</a></li>
<li><a href="#older-releases">7.4. Older Releases</a></li>
</ul>
</li>
<li><a href="#copyright-and-license">8. Copyright and License</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>A library for unit-tests to check the dependencies between classes.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Resources on GitHub</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Repository</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/hajo70/dessert-core">dessert-core</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Library source code</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/hajo70/dessert-site">dessert-site</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Documentation source code</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/hajo70/dessert-tests">dessert-tests</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tests and samples</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Documentation</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Release</th>
<th class="tableblock halign-left valign-top">Reference Doc.</th>
<th class="tableblock halign-left valign-top">API Doc.</th>
</tr>
</thead>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/hajo70/dessert-core">0.5.0-SNAPSHOT</a></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://hajo70.github.io/dessert-site/index.html">reference</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://hajo70.github.io/dessert-core/index.html">javadoc</a></p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/hajo70/dessert-core/tree/0.4.x">0.4.2</a></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dessert.spricom.de/index.html">reference</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dessert.spricom.de/apidocs/index.html">javadoc</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="getting_started"><a class="anchor" href="#getting_started"></a>1. Getting Started</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="maven-dependency"><a class="anchor" href="#maven-dependency"></a>1.1. Maven Dependency</h3>
<div class="paragraph">
<p>Add the <em>dessert-core</em> dependency to your project:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;de.spricom.dessert&lt;/groupId&gt;
    &lt;artifactId&gt;dessert-core&lt;/artifactId&gt;
    &lt;version&gt;0.4.2&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="snapshot-dependency-optional-alternative"><a class="anchor" href="#snapshot-dependency-optional-alternative"></a>1.2. Snapshot Dependency (optional alternative)</h3>
<div class="paragraph">
<p>If you rather want o try out the most current snapshot, then use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;de.spricom.dessert&lt;/groupId&gt;
    &lt;artifactId&gt;dessert-core&lt;/artifactId&gt;
    &lt;version&gt;0.5.0-SNAPSHOT&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You have to specify the repository to use snapshot releases:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;repositories&gt;
    &lt;repository&gt;
        &lt;id&gt;ossrh&lt;/id&gt;
        &lt;name&gt;OSSRH Snapshot Repository&lt;/name&gt;
        &lt;url&gt;https://oss.sonatype.org/content/repositories/snapshots&lt;/url&gt;
        &lt;snapshots&gt;
            &lt;enabled&gt;true&lt;/enabled&gt;
        &lt;/snapshots&gt;
    &lt;/repository&gt;
&lt;/repositories&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="first-test"><a class="anchor" href="#first-test"></a>1.3. First Test</h3>
<div class="paragraph">
<p>Implement your first dependency test:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Test
void willFail() {
    Classpath cp = new Classpath();
    Clazz me = cp.asClazz(this.getClass());
    Root root = cp.rootOf(Test.class);
    SliceAssertions.dessert(me).usesNot(root);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Each <em>dessert</em> test starts with the <code>Classpath</code>. Dessert is all about slicing down the <code>Classpath</code>
and checking the dependencies between the slices. The <code>Classpath</code> is the whole cake. A <code>Clazz</code>
represents a single .class file, the smalles possible <code>Slice</code>. A <code>Root</code> represents a classes
directory, a .jar file or a module. All of them are slices, hence they implement the <code>Slice</code>
interface. <code>SliceAssertion</code> provides a static <code>assertThat</code> method to check for unwanted dependencies
between slices.</p>
</div>
<div class="paragraph">
<p>The test above will fail, because it has a dependency to the junit-jupiter-api.jar. Thus, it
produces the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>java.lang.AssertionError: Illegal Dependencies:
de.spricom.dessert.sample.DessertSampleTest
 -&gt; org.junit.jupiter.api.Test</pre>
</div>
</div>
<div class="paragraph">
<p>The following test shows some other methods to get slices from the <code>Classpath</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Test
void willSucceed() {
    Classpath cp = new Classpath();
    Slice myPackage = cp.packageOf(this.getClass());
    Slice java = cp.slice("java..*");
    Slice libs = cp.packageOf(Test.class).plus(cp.slice("..dessert.assertions|slicing.*"));
    dessert(myPackage).usesOnly(java, libs);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <em>java..*</em> slice represents all classes in the <code>java</code> package or any nested package.
The methods <code>plus</code> and <code>minus</code> can be used do create new slices from existing slices.
The <code>dessert</code> method is an alias for <code>assertThat</code> to prevent name collisions with other
libraries. It stands for <em>dependency assert that</em>. All the assertion methods of
<code>SliceAssertions</code> accept more than one slice, like <code>usesOnly</code>. They treat the slices as an
union of all the slices passed.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tutorial"><a class="anchor" href="#tutorial"></a>2. Tutorial</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This tutorial not only guides you step by step to the <em>dessert</em> features
but it also is a guideline for applying <em>dessert</em>.
Follow these steps, and you&#8217;ll get the most benefit for your project.
The best is to apply it to some Java project
you are currently working on (any other JVM language,
like Kotlin, Scala, Groovy, etc. will do, too).
Before you start the tutorial make sure the <em>dessert-core</em> dependency has
been added to your project, and you are able to run dessert tests as described
in the <a href="#getting_started">Getting Started</a> started section.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/hajo70/dessert-site/blob/main/dessert-sample/src/test/java/de/spricom/dessert/tutorial/DessertTutorialTest.java">DessertTutorialTest.java</a>
provides some simple solutions for this tutorial. If the solutions are not applicable for your particular problem,
then have a look at the
<a href="https://github.com/hajo70/dessert-tests/tree/master/dessert-tests-jdeps/src/test/java/de/spricom/dessert/tutorial">tutorial</a>
package of the
<a href="https://github.com/hajo70/dessert-tests/tree/master/dessert-tests-jdeps">dessert-tests-jdeps</a> project.
You can find there some more advanced examples and solutions for typical problems.
If you still have problems, then post your question on
<a href="https://github.com/hajo70/dessert-core/discussions">discussions</a>.</p>
</div>
<div class="sect2">
<h3 id="detect-usage-of-internal-apis"><a class="anchor" href="#detect-usage-of-internal-apis"></a>2.1. Detect usage of internal APIs</h3>
<div class="paragraph">
<p>Internal APIs are subject to change without notice. Using internal APIs
may cause trouble when you update a dependency. The signature of the internal
API may have changed, it may have disappeared entirely, or it may behave
differently in some corner cases. Thus, your code should not rely on any
internal API. To ensure this, write a test that detects the usage of
JDK&#8217;s internal API (packages <code>com.sun..<strong></code> or <code>sun..</strong></code>) or any other internal
API from some external library (any <code>..internal..*</code> package).</p>
</div>
</div>
<div class="sect2">
<h3 id="detect-duplicates"><a class="anchor" href="#detect-duplicates"></a>2.2. Detect duplicates</h3>
<div class="paragraph">
<p>Each JAR has its own directory structure, thus a class with the same fully qualified name
may appear in more than one JAR. The <code>ClassLoader</code> always uses the first matching class
on the classpath, but the order of the JARs on the classpath may vary on different systems.
If there are different implementations for one of the duplicates that is actually used,
some systems may fail. Such errors are hard to track down. Thus, write a test
that makes sure, there are no duplicates on the classpath. See the <a href="#duplicates">Duplicates</a>
section on how to do this. If you have duplicates write
some code that helps you to track down the problem (i.e list the classes and jars involved).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Many JARs contain a <code>module-info</code> class in their root package. Make sure to ignore
this class when checking for duplicates.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Often you cannot prevent all duplicates, but at least you should have a test that informs
you if there are additional duplicates.</p>
</div>
</div>
<div class="sect2">
<h3 id="detect-cycles"><a class="anchor" href="#detect-cycles"></a>2.3. Detect cycles</h3>
<div class="paragraph">
<p>The problem with a cycle is, it does not have a beginning nor does it have an end. Thus, if you
pick out any class involved in a dependency cycle you cannot use it without all other classes involved
in that cycle. This is not a problem for small cycles of closely related classes, but it&#8217;s a
nightmare if you have to change a software with big intertwined cycles.</p>
</div>
<div class="paragraph">
<p>Dessert can detected cycles between any set of slices (remember: a <code>Clazz</code> is a <code>Slice</code>, too).
To start with, make sure, your software does not have any package-cycles.
See the <a href="#cycle-detection">Cycle detection</a> section on how to do this.</p>
</div>
</div>
<div class="sect2">
<h3 id="investigate-your-project"><a class="anchor" href="#investigate-your-project"></a>2.4. Investigate your project</h3>
<div class="paragraph">
<p>If you have any cycles in your software, you might want to find out, which classes cause that
cycle. Or you may have other questions on your software, for which the search facilities of
your IDE are not sufficient. The <code>slice</code> method in combination with <a href="#predicates">Predicates</a> lets you
filter your classes by almost any condition.</p>
</div>
<div class="paragraph">
<p>If you have a package cycle, write some code that tells you exactly which classes from two
packages involved in the cycle cause that cycle. Alternatively find out, which classes
of your project use <em>java.io</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="simulate-refactorings"><a class="anchor" href="#simulate-refactorings"></a>2.5. Simulate refactorings</h3>
<div class="paragraph">
<p>Often a package cycle can simply be resolved by moving a class from on package to another,
but actually moving a class may require many changes and introduce new cycles. Thus, it would
be very useful if one could find out the effects of moving a classes without actually
doing it. With <em>dessert</em> you can use the <code>Slice</code> methods <code>minus</code> and <code>plus</code> to simulate
the removal of a <code>Clazz</code> from one slice and the addition to another.</p>
</div>
<div class="paragraph">
<p>Simulate the introduction of a new package-cycle by creating new slices from existing package
slices with one or more classes moved from one package to another.
After you have created your simulated cycle, make sure <em>dessert</em> detects it.</p>
</div>
</div>
<div class="sect2">
<h3 id="check-your-layers"><a class="anchor" href="#check-your-layers"></a>2.6. Check your layers</h3>
<div class="paragraph">
<p>Each nontrivial software product is composed of layers. In a classical software product you have
persistence, business logic a presentation layers. Modern designs are base on the
<a href="https://en.wikipedia.org/wiki/Hexagonal_architecture_(software)">hexagonal architecture</a>, also
called <em>ports and adapters architecture</em>. But these are still layered architectures with the
business logic at the bottom, now.</p>
</div>
<div class="paragraph">
<p>The architecture may be strict where one layer can only access the layer below. This is typically
the case in network protocol implementations similar to the
<a href="https://en.wikipedia.org/wiki/OSI_model">OSI model</a>. In most applications the architecture
is relaxed, hence one layer can access all layers below.</p>
</div>
<div class="paragraph">
<p>A common property of the classes within one layer are there external dependencies. Thus, classes
in the presentation layer should not have dependencies to persistence libraries like hibernate
and classes in the persistence layer should not have dependencies to presentation libraries like
JavaFX or Vaadin.</p>
</div>
<div class="paragraph">
<p>Now it&#8217;s time to define the layers of your project. Define a slice for each layer. You may want
to use the <code>Slice</code> method <code>named</code> to assign it a name. Then use <a href="#architecture-verification">Architecture verification</a>
to ensure your code complies with your architecture. Additionally, make sure none of your layers
has any external dependencies it should not.</p>
</div>
</div>
<div class="sect2">
<h3 id="modularize-your-project"><a class="anchor" href="#modularize-your-project"></a>2.7. Modularize your project</h3>
<div class="paragraph">
<p>Layers are the first coarse subdivision of your project. Typically, your software is made up
form smaller parts by cutting down the layers to vertical slices. Each vertical slice
is tied to one domain and has certain dependencies to other parts of the software or
to external libraries. It&#8217;s good practice to explicitly name the dependencies of each
such part.</p>
</div>
<div class="paragraph">
<p>Start from the layers defined in the previous exercise and use the <code>slice</code> method to
cut them down into vertical slices. Then make sure, each such slice uses only the dependencies
it is allowed to, by using the <code>usesOnly</code> assertion. You might want to group your
external dependencies into corresponding slices, to do this.</p>
</div>
<div class="paragraph">
<p>The slices defined in this step are the building blocks of your project. We might call some
modules, but that term is already occupied in the java world, thus I&#8217;ll stay with building
block. Often you don&#8217;t want to expose anything from one building block to others. You can
accomplish this by defining one or more interface slices for each build block and make sure
the depending building blocks only use the corresponding interface slice.</p>
</div>
</div>
<div class="sect2">
<h3 id="define-your-custom-classpath"><a class="anchor" href="#define-your-custom-classpath"></a>2.8. Define your custom classpath</h3>
<div class="paragraph">
<p>By default, the <code>Classpath</code> is based on the path defined by the <em>java.class.path</em> system property.
This fits most cases, but there might be circumstances where this is not suitable.
See <a href="#customize-class-resolving">Customize class resolving</a> on how you can define your own custom classpath.
Then define a custom Classpath that contains all elements of the <em>java.class.path</em> system property
in reverse order. Check if your tests produce the same results.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="user-documentation"><a class="anchor" href="#user-documentation"></a>3. User Documentation</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="background"><a class="anchor" href="#background"></a>3.1. Background</h3>
<div class="paragraph">
<p>The goal of dependency checking is finding unwanted dependencies.
Dessert does this be analyzing .class files.
The java compiler generates a .class file for each
class, interface, annotation, (anonymous) inner-class or -interface or enum class.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
A java source file can define more than one class.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In <em>dessert</em>  a .class file is represented by <code>Clazz</code>.
The <code>Clazz</code> is the smallest unit of granularity dessert can work with. The biggest
unit is the <code>Classpath</code>. The <code>Classpath</code> contains all classes within your application.</p>
</div>
<div class="paragraph">
<p>To specify dependency assertions you have to tear the <code>Classpath</code> down into smaller pieces.
Imagine the <code>Classpath</code> is a big cake you have to slice down. Thus the most import concept
of <em>dessert</em> is the <code>Slice</code>. The smallest <code>Slice</code> is a <code>Clazz</code> and the biggest <code>Slice</code> is
the <code>Classpath</code>.</p>
</div>
<div class="paragraph">
<p>The name <strong>dessert</strong> comes from <strong>de</strong>pendency a<strong>ssert</strong>.</p>
</div>
</div>
<div class="sect2">
<h3 id="design-goals-and-features"><a class="anchor" href="#design-goals-and-features"></a>3.2. Design Goals and Features</h3>
<div class="paragraph">
<p>If you&#8217;re considering to use <em>dessert</em> you probably have problems with dependencies.
Hence the most important design goal was to not introduce any additional dependency
that might cause you a headache.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>No other dependencies but pure java</p>
</li>
<li>
<p>Support a wide range of java versions an execution environments</p>
</li>
<li>
<p>Easy and seamless integration with other testing or assertion frameworks</p>
</li>
<li>
<p>Simple and intuitive API (motivated by <a href="https://joel-costigliola.github.io/assertj/">AssertJ</a>)</p>
</li>
<li>
<p>Assertions should be robust against refactorings (no strings for class- or package names required)</p>
</li>
<li>
<p>Compatibility to the <a href="https://docs.oracle.com/en/java/javase/15/docs/specs/man/jdeps.html">jdeps</a> utility.</p>
</li>
<li>
<p>Focus on dependency assertions and nothing else</p>
</li>
<li>
<p>Support for projects of any scale</p>
</li>
<li>
<p>Speed</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The design goals lead to these features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Supports any JDK from Java 6 to Java 15</p>
</li>
<li>
<p>Has only dependencies to classes within the <code>java.base</code> module</p>
</li>
<li>
<p>Annalyzes more than 10000 classes per second on a typical developer machine
<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup></p>
</li>
<li>
<p>Detects any dependency <em>jdeps</em> detects.
<sup class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup> (This is not true the other way round,
see the FAQ why this is so.)</p>
</li>
<li>
<p>Performs the dependency analysis as late as possible to prevent any unnecessary analysis.
Thus its safe to use on big projects with lots of dependencies.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="the-slice"><a class="anchor" href="#the-slice"></a>3.3. The Slice</h3>
<div class="paragraph">
<p>When using dessert you work most of the time with some <code>Slice</code> implementation. The following diagram
shows all such implementations provided by dessert:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/slice-overview.svg" alt="slice overview" width="529" height="331">
</div>
</div>
<div class="paragraph">
<p>The most important <code>Slice</code> methods are <code>plus</code>, <code>minus</code>, and <code>slice</code> to create new slices from existing
ones. The <code>AbstractRootSlice</code> provides some convenience methods to work with packages. <code>packageOf</code> returns
a slice of all classes within one package (without sub-packages). <code>packageTreeOf' returns a slice of
all classes within a package, or a nested sub-package. Called on a `Root</code> these methods return only
classes within that root. A <code>Root</code> is a classes directory or a .jar file that belongs to the <code>Classpath</code>.
To get a <code>Root</code> you can use the <code>Classpath</code> method <code>rootOf</code>.</p>
</div>
<div class="paragraph">
<p>The <code>Classpath</code> methods <code>asClazz</code> and <code>sliceOf</code> can create slices for classes that are not on the
<code>Classpath</code> such as classes located in the java or javax packages or dependencies of some classes.
In such a case the <code>Classpath</code> uses the current <code>ClassLoader</code> to get the corresponding .class file.
If this does not work either, it creates a placeholder <code>Clazz</code> that contains only the classname.</p>
</div>
<div class="paragraph">
<p>The <code>slice</code> methods of <code>Classpath</code> do not necessarily return a slice that can be resolved to a concrete
set of classes. A slice may also be defined by a name-pattern or some predicate. For such a slice one
can use the <code>contains</code> method to check whether a <code>Clazz</code> belongs to it, thus the class fulfills
all predicates. But calling <code>getClazzes</code> will throw a <code>ResolveException</code>. This happens if the
<code>Classpath</code> contains none of the classes belonging to the slice. Internally <em>dessert</em> works with such
predicate based slices as long as <code>getClazzes</code> has not been called, for performance reasons.</p>
</div>
<div class="paragraph">
<p><em>Dessert</em> has been optimized to resolve name-pattern very fast. Hence, it&#8217;s a good practice to first
slice be name (or <code>packageOf</code>/<code>packageTreeOf</code>) then used predicates to slice-down the slices further.</p>
</div>
<div class="paragraph">
<p><code>getDependencies</code> returns the dependencies of a slice and <code>uses</code> checks whether some other slice
contains one of these dependencies.</p>
</div>
<div class="paragraph">
<p>To add features to existing slices always extend <code>AbstractDelegateSlice</code>. The <code>named</code> method returns
one such extension that makes a slices' <code>toString</code> method return the name passed.</p>
</div>
</div>
<div class="sect2">
<h3 id="name-patterns"><a class="anchor" href="#name-patterns"></a>3.4. Name-Patterns</h3>
<div class="paragraph">
<p>Name-patterns are the most important means to define slices. A name-pattern
identifies a set of classes by their full qualified classname.</p>
</div>
<div class="paragraph">
<p>The syntax has been motivated by the
<a href="https://www.eclipse.org/aspectj/doc/released/progguide/quick-typePatterns.htmlAspectJ" class="bare">https://www.eclipse.org/aspectj/doc/released/progguide/quick-typePatterns.htmlAspectJ</a> TypeNamePattern]
with slight modifications:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The pattern can either be a plain type name, the wildcard *, or an
identifier with embedded * or .. wildcards or the | separator.</p>
</li>
<li>
<p>An * matches any sequence of characters, but does not match the package separator ".".</p>
</li>
<li>
<p>An | separates alternatives that do not contain a package separator ".".</p>
</li>
<li>
<p>An .. matches any sequence of characters that starts and ends with the package separator ".".</p>
</li>
<li>
<p>The identifier to match with is always the name returned by {@link Class#getName()}.
Thus, $ is the only inner-type separator supported.</p>
</li>
<li>
<p>The * does match $, too.</p>
</li>
<li>
<p>A leading .. additionally matches the root package.</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Examples:</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Pattern</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sample.Foo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Matches only sample.Foo</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sample.Foo*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Matches all types in sample starting with "Foo" and all inner-types of Foo</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sample.bar|baz.*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Matches all types in sample.bar and sample.baz</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sample.Foo$*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Matches only inner-types of Foo</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">..Foo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Matches all Foo in any package (incl. root package)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>.</strong>..Foo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Matches all Foo nested in a sub-package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Matches all types in the root package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">..*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Matches all types</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="predicates"><a class="anchor" href="#predicates"></a>3.5. Predicates</h3>
<div class="paragraph">
<p>Predicates are another way to define slices. Typically, they are used to selecting classes
from an existing <code>Slice</code> that meets certain properties. <code>Predicate</code> is a functional interface.
<code>Predicates</code> provides <code>and</code>, <code>or</code> and <code>not</code> to combine predicates. <code>ClazzPredicates</code> contains
some pre-defined predicates for classes.</p>
</div>
<div class="paragraph">
<p>The following code fragment demonstrates their usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Classpath cp = new Classpath();
Root dessert = cp.rootOf(Slice.class);
Slice assertions = dessert.packageOf(SliceAssertions.class);
Slice slicing = dessert.packageOf(Slice.class);
Slice slicingInterfaces = slicing.slice(
        Predicates.and(ClazzPredicates.PUBLIC,
                Predicates.or(
                        ClazzPredicates.INTERFACE,
                        ClazzPredicates.ANNOTATION,
                        ClazzPredicates.ENUM
                )
        )
);
SliceAssertions.dessert(assertions).usesNot(slicing.minus(slicingInterfaces));</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>slicingInterfaces</code> contains all public interfaces, enums or annotations of the <code>slicing</code> package within the
<code>dessert-core</code> library. The assertion checks that the <code>assertions</code> packages uses only these types by asserting
that it uses nothing from the complement. That check will fail, because <code>assertions</code> uses i.e. <code>Clazz</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="duplicates"><a class="anchor" href="#duplicates"></a>3.6. Duplicates</h3>
<div class="paragraph">
<p>The <code>Classpath</code> has a method <code>duplicates</code> that returns a special <code>Slice</code> of all .class files that appear
at least twice on the <code>Classpath</code>. Other as the <code>ClassLoader</code> <em>dessert</em> does not stop at the first
class that matches a certain name. It always considers all matches. Duplicates are a common cause
of problems, because the implementation is chosen more ore less randomly.</p>
</div>
<div class="paragraph">
<p>The following code fragment demonstrates this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Classpath cp = new Classpath();
ConcreteSlice duplicates = cp.duplicates();
duplicates.getClazzes().forEach(clazz -&gt; System.out.println(clazz.getURI()));
Assertions.assertThat(duplicates.getClazzes()).isNotEmpty();

Slice slice = duplicates.minus(cp.asClazz("module-info").getAlternatives());
Assertions.assertThat(slice.getClazzes()).isEmpty();

Slice slice2 = duplicates.minus(cp.slice("module-info"));
Assertions.assertThat(slice2.getClazzes()).isEmpty();

Slice slice3 = duplicates.minus("module-info");
Assertions.assertThat(slice3.getClazzes()).isEmpty();</code></pre>
</div>
</div>
<div class="paragraph">
<p>The sample uses JUnit 5 which has a <em>module-info.class</em> in each of its jars, thus <code>duplicates</code> is
not empty. The <code>Classpath</code> method <code>asClazz</code> returns a single <code>Clazz</code> object which represents one
if these module-info classes. A <code>Clazz</code> object always represents one single .class file.
<code>getAlternatives()</code> returns all classes with the name on the <code>Classpath</code>. After subtracting the
module-info classes there are no more duplicates left. An alternative way to get a slice of
all module-info classes is <code>slice("module-info")</code> or simple by using the short-cut
<code>minus("module-info")</code>, because it filters by name.</p>
</div>
</div>
<div class="sect2">
<h3 id="assertions"><a class="anchor" href="#assertions"></a>3.7. Assertions</h3>
<div class="paragraph">
<p>All dessert assertions start with one of the static <code>SliceAssertions</code> methods <code>assertThat</code>
or its alias <code>dessert</code>. These methods return a <code>SliceAssert</code> object with its most important
methods <code>usesNot</code> and <code>usesOnly</code>. Both methods return a <code>SliceAssert</code> again, so that assertions
can be queued:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Classpath cp = new Classpath();
dessert(cp.asClazz(this.getClass()))
        .usesNot(cp.slice("java.io|net..*"))
        .usesNot(cp.slice("org.junit.jupiter.api.Assertions"))
        .usesOnly(cp.slice("..junit.jupiter.api.*"),
                cp.slice("..dessert..*"),
                cp.slice("java.lang..*"));</code></pre>
</div>
</div>
<div class="paragraph">
<p>When an assertion fails it throws an <code>AssertionError</code>. The message shows details about the cause
of the failure. This message is produced by the <code>DefaultIllegalDependenciesRenderer</code>. That renderer
can be replaced with the <code>SliceAssert</code> method <code>renderWith</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
To have any effect <code>renderWith</code> must be invoked before the assertions (i.e. <code>usesNot</code>).
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="cycle-detection"><a class="anchor" href="#cycle-detection"></a>3.8. Cycle detection</h3>
<div class="paragraph">
<p><code>SliceAssert</code> provides the method <code>isCycleFree</code> to check whether a set of slices has any
cyclic dependencies. Because each <code>Clazz</code> is a <code>Slice</code> one check the classes of slice
for a cycle like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Classpath cp = new Classpath();
dessert(cp.packageTreeOf(CycleDump.class).getClazzes()).isCycleFree();</code></pre>
</div>
</div>
<div class="paragraph">
<p>The sample contains a cycle, hence it produces the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>java.lang.AssertionError: Cycle:
clazz de.spricom.dessert.cycle.foo.Foo,
clazz de.spricom.dessert.cycle.bar.Bar,
clazz de.spricom.dessert.cycle.CycleDump,
clazz de.spricom.dessert.cycle.foo.Foo</pre>
</div>
</div>
<div class="paragraph">
<p>Class-cycles are quite common and should not be a problem as long as the cycle is within a
package. Package-cycles on the other hand are an indicator for serious architecture problems.
To detect these you can use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Classpath cp = new Classpath();
Slice slice = cp.packageTreeOf(CycleDump.class);
dessert(slice.partitionByPackage()).isCycleFree();</code></pre>
</div>
</div>
<div class="paragraph">
<p>This produces:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>java.lang.AssertionError: Cycle:
slice partition de.spricom.dessert.cycle.bar,
slice partition de.spricom.dessert.cycle,
slice partition de.spricom.dessert.cycle.foo,
slice partition de.spricom.dessert.cycle.bar</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>AssertionError</code> message is produced by the <code>DefaultCycleRenderer</code>. Another <code>CycleRenderer</code>
can be given with the <code>SliceAssert</code> method <code>renderCycleWith</code>.</p>
</div>
<div class="paragraph">
<p>The <code>partitionByPackage</code> is a specialized <code>Slice</code> method that partitions the classes of a Slice
by package-name. Thus, it produces a Map for which the package-name is the key, and the value is
a slice containing all classes that belong to the package. In this case the value is a specialized
slice that gives access to the package-name and the parent-package.</p>
</div>
<div class="paragraph">
<p>The more general <code>partitionBy</code> uses a <code>SlicePartitioner</code> that maps each class to some key.
The result is a map of <code>PartitionSlice</code>. A <code>PartitionSlice</code> is a <code>ConcreteSlice</code> (set of classes),
with the key assigned. See <code>SlicePartitioners</code> for examples of pre-defined slice partitioners.
There is another <code>partitionBy</code> method with a second <code>PartitionSliceFactory</code>
parameter. This can be used to create specialized <code>PartitionSlice</code> objects like the <code>PackageSlice</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="architecture-verification"><a class="anchor" href="#architecture-verification"></a>3.9. Architecture verification</h3>
<div class="paragraph">
<p><code>SliceAssert</code> has two additional convenience methods to verify a layered architecture. Therefore,
you have to pass a list of layers to the <code>dessert</code> method. <code>isLayeredStrict</code> check whether each
layer depends only on classes within itself or classes within its immediate successor.
<code>isLayeredRelaxed</code> relaxes this from an <em>immediate successor</em> to _any successor.
The following example shows how to use this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Classpath cp = new Classpath();
List&lt;Slice&gt; layers = Arrays.asList(
        cp.packageTreeOf(SliceAssertions.class).named("assertions"),
        cp.packageTreeOf(Slice.class).named("slicing"),
        cp.packageTreeOf(ClassResolver.class).named("resolve"),
        cp.packageTreeOf(ClassFile.class).named("classfile"),
        cp.slice("..dessert.matching|util..*").named("util")
);
dessert(layers).isLayeredRelaxed();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="customize-class-resolving"><a class="anchor" href="#customize-class-resolving"></a>3.10. Customize class resolving</h3>
<div class="paragraph">
<p>The <code>Classpath</code> needs a <code>ClassResolver</code> to find the classes it operates on. By default, the
Classpath uses a resolver that operates on the path defined by the <em>java.class.path</em>
system property. You can define your own ClassResolver and add the classes directories and
jar files you want. You can even define your own <code>ClassRoot</code> with some custom strategy to
find classes. Then pass that ClassResolver to the Classpath constructor. This will <em>freeze</em>
the ClassResolver. Thus, after a ClassResolver is used by a Classpath it, it must not
be changed.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="plans-for-dessert-core-0-5-x"><a class="anchor" href="#plans-for-dessert-core-0-5-x"></a>4. Plans for dessert-core 0.5.x</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Utilize information within module-info classes</p>
</li>
<li>
<p>Support multi-release jars</p>
</li>
<li>
<p>API to define modules for dessert-tests</p>
</li>
<li>
<p>Ready-to-use module definitions for the JDK that resemble the Java9+ modules,
usable for older java versions</p>
</li>
<li>
<p>Architecture visualization API</p>
</li>
<li>
<p>Improved support for investigating existing projects</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="getting-involved"><a class="anchor" href="#getting-involved"></a>5. Getting Involved</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you&#8217;re missing some feature or find a bug then please
<a href="https://github.com/hajo70/dessert-core/issues/new">open an issue</a> on GibHub.</p>
</div>
<div class="paragraph">
<p>If you have questions the best way to get in contact is
<a href="https://github.com/hajo70/dessert-core/discussions">discussions</a>.</p>
</div>
<div class="paragraph">
<p>If you just want to send (positive) feedback, then send an e-mail to <a href="mailto:dessert@spricom.de">dessert@spricom.de</a>,
but don&#8217;t expect to get an answer, because I&#8217;m doing all this in my spare time.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="frequently-asked-questsions"><a class="anchor" href="#frequently-asked-questsions"></a>6. Frequently asked Questsions</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="when-will-be-there-a-1-0-version"><a class="anchor" href="#when-will-be-there-a-1-0-version"></a>6.1. When will be there a 1.0 version?</h3>
<div class="paragraph">
<p>As along as I don&#8217;t have any feedback of someone who is using this library, there is no reason to keep the
API backwards compatible. Within the 0.x.y versions the API is subject to change without notice.
If you are using <em>dessert</em> and if you&#8217;re fine with the API then send an e-mail to <a href="mailto:dessert@spricom.de">dessert@spricom.de</a>.
As soon as there are enough e-mails I&#8217;ll release a 1.0.0 and try to keep the API backwards compatible
from that moment on.</p>
</div>
</div>
<div class="sect2">
<h3 id="why-does-dessert-find-more-dependencies-than-jdeps"><a class="anchor" href="#why-does-dessert-find-more-dependencies-than-jdeps"></a>6.2. Why does dessert find more dependencies than <em>jdeps</em>?</h3>
<div class="paragraph">
<p>Well, <em>jdeps</em> shows all runtime dependencies whereas dessert shows all compile-time
dependencies. Hence, if you use a class for which a runtime dependency is missing
you&#8217;ll get a <code>NoClassDefFoundError</code>. There are dependencies within generics or
within annotations that were required during compilation but not while using the
compiled class. For more information
see <a href="https://bugs.openjdk.java.net/browse/JDK-8134625">JDK-8134625</a>.
If you want to split a project into modules, then all the compile-time
dependencies are relevant. Thus, that&#8217;s what dessert operates on.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The compiler may have removed some source dependency that
cannot be detected in the .class file anymore.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes"><a class="anchor" href="#release-notes"></a>7. Release Notes</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="dessert-core-0-4-2"><a class="anchor" href="#dessert-core-0-4-2"></a>7.1. dessert-core-0.4.2</h3>
<div class="paragraph">
<p>Bugfix-release:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The cycle detection algorithm ignores dependencies within the same slice, now.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="dessert-core-0-4-1"><a class="anchor" href="#dessert-core-0-4-1"></a>7.2. dessert-core-0.4.1</h3>
<div class="paragraph">
<p>Some minor changes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Duplicate .class files in JAR files won&#8217;t cause an AssertionError.</p>
</li>
<li>
<p>A <code>Clazz</code> created by <code>Classpath.asClazz(java.lang.Class&lt;?&gt;)</code> immediately contains all
alternatives on the <code>Classpath</code>.</p>
</li>
<li>
<p><code>ClassPackage</code> internally uses <code>TreeMap</code> instead of <code>List</code> to lookup classes. This
improves the performance if a package has many classes.</p>
</li>
<li>
<p>Many Javadoc additions.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="dessert-core-0-4-0"><a class="anchor" href="#dessert-core-0-4-0"></a>7.3. dessert-core-0.4.0</h3>
<div class="paragraph">
<p>Starting with this release dessert will be available on Maven Central. Therefore, the maven coordinates
have been changed. The project has been renamed to dessert-core and everything that does not belong
to the core functionality (i.e. DuplicateFinder) has been deleted.</p>
</div>
<div class="paragraph">
<p>The most prominent changes are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>New maven coordinates: de.spricom.dessert:dessert-core</p>
</li>
<li>
<p>Removal of DuplicateFinder and corresponding traversal API</p>
</li>
<li>
<p>Support for any Classfile-Format up to Java 15</p>
</li>
<li>
<p>Multi-Release JARs don&#8217;t cause an error (but version specific classes are ignored)</p>
</li>
<li>
<p>API much simpler and more intuitive: SliceEntry renamed to Clazz,
SliceContext renamed to Classpath and both implement Slice</p>
</li>
<li>
<p>The Grouping-API has been replaced by simple maps and methods for partitioning</p>
</li>
<li>
<p>Performant pattern-matching for class-names</p>
</li>
<li>
<p>Many bugfixes, simplifications and preformance-improvements</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="older-releases"><a class="anchor" href="#older-releases"></a>7.4. Older Releases</h3>
<div class="paragraph">
<p>See <a href="https://github.com/hajo70/dessert-core/releases">GitHub releases</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="copyright-and-license"><a class="anchor" href="#copyright-and-license"></a>8. Copyright and License</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Code and documentation copyright 2017–2021 <a href="https://github.com/hajo70">Hans Jörg Heßmann</a>.
Code released under the <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License 2.0</a>.</p>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. See the <a href="https://github.com/hajo70/dessert-tests/blob/master/dessert-jdeps-tests/src/test/java/de/spricom/dessert/classfile/DessertPerformanceTest.java">dessert-tests</a> project for a corresponding performanc test.
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. This has been verified for more that 40000 classes. See <a href="https://github.com/hajo70/dessert-tests">dessert-tests</a> for details. Please <a href="https://github.com/hajo70/dessert-core/issues/new">open an issue</a> if you encounter any class for which this is not true.
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2021-05-08 14:13:38 UTC
</div>
</div>
</body>
</html>